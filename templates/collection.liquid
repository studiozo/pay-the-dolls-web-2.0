{%- comment -%}
  Collection Template (V3 Specification)
{%- endcomment -%}

<div class="page-header">
  <h1>{{ collection.title }}</h1>
  <p>{% if collection.description != blank %}{{ collection.description }}{% else %}Browse the marketplace.{% endif %}</p>
</div>

<div class="container" style="padding-bottom: 6rem;">
  <div class="grid grid--3">
    {%- paginate collection.products by 24 -%}
      {%- for product in collection.products -%}
        <a href="{{ product.url }}" class="product-card">
          <div class="product-card__image">
            {%- if product.featured_image != blank -%}
              <img 
                src="{{ product.featured_image | image_url: width: 600 }}"
                alt="{{ product.featured_image.alt | escape }}"
                loading="lazy"
              >
            {%- else -%}
              <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: #eee;">
                No Image
              </div>
            {%- endif -%}
          </div>
          <div class="product-card__info">
            <h3 class="product-card__title">{{ product.title }}</h3>
            <p class="product-card__price">
              {{ product.price | money }}
            </p>
            {%- if product.vendor != shop.name -%}
              <p style="font-size: 0.8rem; color: #888;">{{ product.vendor }}</p>
            {%- endif -%}
          </div>
        </a>
      {%- else -%}
        <div class="text-center" style="grid-column: 1 / -1; padding: 4rem 0;">
          <h2>Nothing here yet.</h2>
          <p class="mt-m">The dolls are still cooking.</p>
          <a href="/" class="btn mt-m">Back Home</a>
        </div>
      {%- endfor -%}
      
      {%- if paginate.pages > 1 -%}
        <div class="text-center mt-xl" style="grid-column: 1 / -1; display: flex; justify-content: center; gap: 1rem;">
          {%- if paginate.previous -%}
            <a href="{{ paginate.previous.url }}" class="btn">Previous</a>
          {%- endif -%}
          {%- if paginate.next -%}
            <a href="{{ paginate.next.url }}" class="btn">Next</a>
          {%- endif -%}
        </div>
      {%- endif -%}
    {%- endpaginate -%}
  </div>
</div>
