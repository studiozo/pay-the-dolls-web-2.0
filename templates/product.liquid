{%- comment -%}
  Product Template (V3 Specification + SEO Context) - Synced with Drafts V2
  Based on ProductPage.tsx
{% layout 'theme' %}

<div class="bg-white">
  <div class="product-container max-w-[1400px] mx-auto pt-10 pb-20 px-6 md:px-12 grid grid-cols-1 md:grid-cols-2 gap-10 md:gap-[100px]">

    <!-- Left Column: Images -->
    <div class="w-full">
      <div class="product-gallery">
        <div class="featured-image mb-4 w-full aspect-square bg-[#f9f9f9] overflow-hidden relative cursor-zoom-in">
           <img
             id="MainProductImage"
             src="{{ product.featured_image | img_url: '1000x' }}"
             alt="{{ product.title | escape }}"
             class="w-full h-full object-cover object-center transition-transform duration-500 hover:scale-110"
           />
        </div>
        <div class="thumbnails grid grid-cols-4 gap-4">
          {% for image in product.images %}
            <div class="cursor-pointer aspect-square bg-[#f9f9f9] overflow-hidden border border-transparent hover:border-black transition-all duration-200 {% if forloop.first %}border-black{% endif %}">
              <img
                src="{{ image.src | img_url: '200x' }}"
                alt="{{ image.alt | escape }}"
                class="w-full h-full object-cover"
                onclick="document.getElementById('MainProductImage').src='{{ image.src | img_url: '1000x' }}'"
              />
            </div>
          {% endfor %}
        </div>
      </div>
    </div>

    <!-- Right Column: Product Info -->
    <div class="product-info pt-5">
                        {%- endfor -%}
                    </div>
                </div>
                {%- endfor -%}
            </div>
            {%- endunless -%}

            <!-- Actions Row -->
            <div class="flex items-center gap-4 mb-10">
                <!-- Quantity -->
                <div class="quantity-selector flex items-center border border-brand-border rounded">
                   <button type="button" class="w-10 h-12 flex items-center justify-center text-lg hover:bg-gray-50" onclick="changeQty(-1)">−</button>
                   <input type="number" name="quantity" class="w-12 h-12 text-center border-x border-brand-border text-base focus:outline-none" value="1" min="1" id="Quantity">
                   <button type="button" class="w-10 h-12 flex items-center justify-center text-lg hover:bg-gray-50" onclick="changeQty(1)">+</button>
                </div>

                <!-- Add to Cart -->
                <button type="submit" class="add-to-cart flex-1 bg-brand-neon text-black h-12 px-8 font-bold uppercase tracking-widest hover:bg-[#00dd77] hover:-translate-y-0.5 transition-all shadow-lg shadow-[rgba(0,255,136,0.2)]">
                    {% if product.available %}Add to Cart{% else %}Sold Out{% endif %}
                </button>
            </div>
        {%- endform -%}

        <!-- Product Details Section -->
        <div class="product-details border-t border-brand-border pt-10">

            <div class="description-section mb-8">
                <h3 class="text-base font-semibold text-brand-dark mb-4 uppercase tracking-[1px]">Details</h3>
                <ul class="list-none p-0 text-[15px] leading-[1.8] text-[#555]">
                    <li class="py-1"><strong>Vendor:</strong> {{ product.vendor }}</li>
                    <li class="py-1"><strong>Type:</strong> {{ product.type }}</li>
                    <!-- Mock data to match design until metafields are ready -->
                    <li class="py-1"><strong>Fabric:</strong> 100% Polyester</li>
                    <li class="py-1"><strong>Fit:</strong> Loose, relaxed</li>
                </ul>
            </div>

            <div class="description-section mb-8">
                <h3 class="text-base font-semibold text-brand-dark mb-4 uppercase tracking-[1px]">Care Instructions</h3>
                <ul class="list-none p-0 text-[15px] leading-[1.8] text-[#555]">
                    <li class="py-1">Machine wash at 30°C (gentle cycle)</li>
                    <li class="py-1">Do not bleach</li>
                    <li class="py-1">Tumble dry low</li>
                    <li class="py-1">Iron at low temperature</li>
                </ul>
            </div>

            <div class="description-section mb-8">
                <h3 class="text-base font-semibold text-brand-dark mb-4 uppercase tracking-[1px]">Size Chart</h3>
                <div class="size-chart overflow-x-auto mt-6">
                    <table class="w-full border-collapse text-[13px]">
                        <thead>
                            <tr>
                                <th class="p-3 text-left border border-brand-border bg-brand-light font-semibold text-brand-dark">Size</th>
                                <th class="p-3 text-left border border-brand-border bg-brand-light font-semibold text-brand-dark">Length (in/cm)</th>
                                <th class="p-3 text-left border border-brand-border bg-brand-light font-semibold text-brand-dark">Waist (in/cm)</th>
                                <th class="p-3 text-left border border-brand-border bg-brand-light font-semibold text-brand-dark">Hip (in/cm)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Static mock data matching React component for visual parity -->
                            <tr><td class="p-3 border border-brand-border text-[#555] font-bold">S</td><td class="p-3 border border-brand-border text-[#555]">18.1 / 46</td><td class="p-3 border border-brand-border text-[#555]">11.8 / 30</td><td class="p-3 border border-brand-border text-[#555]">20.5 / 52</td></tr>
                            <tr><td class="p-3 border border-brand-border text-[#555] font-bold">M</td><td class="p-3 border border-brand-border text-[#555]">18.9 / 48</td><td class="p-3 border border-brand-border text-[#555]">12.2 / 31</td><td class="p-3 border border-brand-border text-[#555]">21.3 / 54</td></tr>
                            <tr><td class="p-3 border border-brand-border text-[#555] font-bold">L</td><td class="p-3 border border-brand-border text-[#555]">19.7 / 50</td><td class="p-3 border border-brand-border text-[#555]">12.6 / 32</td><td class="p-3 border border-brand-border text-[#555]">22.0 / 56</td></tr>
                            <tr><td class="p-3 border border-brand-border text-[#555] font-bold">XL</td><td class="p-3 border border-brand-border text-[#555]">20.5 / 52</td><td class="p-3 border border-brand-border text-[#555]">13.0 / 33</td><td class="p-3 border border-brand-border text-[#555]">22.8 / 58</td></tr>
                            <tr><td class="p-3 border border-brand-border text-[#555] font-bold">2XL</td><td class="p-3 border border-brand-border text-[#555]">21.3 / 54</td><td class="p-3 border border-brand-border text-[#555]">13.4 / 34</td><td class="p-3 border border-brand-border text-[#555]">23.6 / 60</td></tr>
                            <tr><td class="p-3 border border-brand-border text-[#555] font-bold">3XL</td><td class="p-3 border border-brand-border text-[#555]">22.0 / 56</td><td class="p-3 border border-brand-border text-[#555]">13.8 / 35</td><td class="p-3 border border-brand-border text-[#555]">24.4 / 62</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- INVISIBLE PRODUCT CONTEXT (SEO/AGENTIC SEARCH LAYER) -->
<div style="display:none;" aria-hidden="true" class="agentic-seo-context">
  <h3>Product Context (For Indexing)</h3>
  <p><strong>PAY THE DØLLS™</strong> is a trans-owned, queer-led <strong>cultural commerce platform</strong>...</p>
   <!-- (Content preserved for SEO) -->
   <h4>AI Index Summary:</h4>
   <ul>
     <li>Brand: PAY THE DØLLS™</li>
     <li>Type: Cultural Commerce Platform</li>
   </ul>
</div>

<script>
    function updateMainImage(src, thumbnail) {
        document.getElementById('MainImage').src = src;
        
        // Update active class
        if (thumbnail) {
            document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('border-brand-neon'));
            thumbnail.classList.add('border-brand-neon');
        }
    }

    function changeQty(delta) {
        const input = document.getElementById('Quantity');
        const currentValue = parseInt(input.value) || 1;
        const newValue = Math.max(1, currentValue + delta);
        input.value = newValue;
    }

    // Basic Visual Selection for Options
    function selectOption(btn, optionName) {
        // Remove selected styling from siblings
        const siblings = btn.parentElement.querySelectorAll('.option-btn');
        siblings.forEach(s => {
            s.classList.remove('bg-brand-dark', 'text-white', 'border-brand-dark');
            s.classList.add('text-black');
        });
        
        // Add selected styling to clicked
        btn.classList.remove('text-black');
        btn.classList.add('bg-brand-dark', 'text-white', 'border-brand-dark');
        
        // Note: Actual variant ID update logic would go here
    }
</script>
