{% comment %}
  ZØVIVAA / STUDIO ZO COMMERCE PROTOCOL v1.4
  Template: studiozo.liquid
  Function: Dynamic Single-Page Catalog (Vendor: STuDiØ ZØ)
{% endcomment %}

{% layout 'theme' %}

<style>
  .text-outline-white {
    -webkit-text-stroke: 1px white;
    color: transparent;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
</style>

<div class="bg-[#050505] min-h-screen text-white font-mono relative selection:bg-[#CCFF00] selection:text-black pb-24">
  
  <!-- Background Grid/Noise texture -->
  <div class="pointer-events-none fixed inset-0 opacity-[0.03] z-0"
       style="background-image: linear-gradient(#333 1px, transparent 1px), linear-gradient(90deg, #333 1px, transparent 1px); background-size: 40px 40px;">
  </div>

  <!-- Top Bar -->
  <div class="relative z-10 flex justify-between items-start px-6 pt-6 md:px-12 text-[10px] md:text-[11px] tracking-[0.2em] text-[#666] font-bold">
     <div class="text-white italic text-lg tracking-tighter not-italic font-sans">
         ZØVIVAA
     </div>
     <div class="text-right flex flex-col items-end">
         <div class="mb-1 text-[#CCFF00]">SYS.ONLINE</div>
         <div id="sys-clock" class="font-mono tabular-nums text-white">
           00:00:00.000
         </div>
         <a href="/pages/brands" class="mt-6 border border-[#333] px-5 py-2 hover:bg-[#CCFF00] hover:text-black hover:border-[#CCFF00] transition-all duration-300 no-underline text-[#666] hover:text-black">
           [ RETURN TO DASHBOARD ]
         </a>
     </div>
  </div>

  <!-- Hero Header -->
  <div class="relative z-10 px-6 md:px-12 mt-12 mb-20">
     <h1 class="text-[14vw] md:text-[160px] leading-[0.8] font-bold text-outline-white tracking-tighter font-sans select-none">
        STuDiØ ZØ
     </h1>
     <div class="mt-6 flex items-center gap-4">
         <div class="h-[3px] w-32 bg-gradient-to-r from-[#FF3333] to-[#CCFF00]"></div>
         <span class="text-white font-bold tracking-[0.2em] uppercase text-sm md:text-base">
            // CØMMERCE
         </span>
     </div>
  </div>

  <!-- Filter Tabs -->
  <div class="relative z-10 px-6 md:px-12 mb-12 flex gap-8 border-b border-[#222] overflow-x-auto whitespace-nowrap scrollbar-hide">
    <button class="tab-btn pb-4 text-xs font-bold uppercase tracking-[0.2em] transition-all duration-300 text-[#CCFF00] border-b-2 border-[#CCFF00]" data-tab="paintings">
      PAINTINGS
    </button>
    <button class="tab-btn pb-4 text-xs font-bold uppercase tracking-[0.2em] transition-all duration-300 text-[#555] hover:text-white" data-tab="prints">
      PRINTS
    </button>
    <button class="tab-btn pb-4 text-xs font-bold uppercase tracking-[0.2em] transition-all duration-300 text-[#555] hover:text-white" data-tab="rezoed">
      REZØED
    </button>
  </div>

  <!-- Product Grid -->
  <div id="artwork-grid" class="relative z-10 px-6 md:px-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-5 gap-y-16">
    <!-- Items injected by JS -->
  </div>

</div>

<script>
  // DYNAMIC LIQUID INJECTION
  const ARTWORKS = [
    {%- assign first_match = true -%}
    {%- for product in collections.all.products -%}
      {%- if product.vendor == 'STuDiØ ZØ' -%}
        {%- assign current_category = 'paintings' -%}
        {%- if product.tags contains 'prints' or product.tags contains 'PRINTS' -%}
          {%- assign current_category = 'prints' -%}
        {%- elsif product.tags contains 'rezoed' or product.tags contains 'REZØED' -%}
          {%- assign current_category = 'rezoed' -%}
        {%- endif -%}
        {%- unless first_match -%},{%- endunless -%}{%- assign first_match = false -%}
        {
          id: {{ product.id }},
          code: {{ product.variants.first.sku | default: "ZO-ART" | json }},
          title: {{ product.title | json }},
          price: {{ product.price | money_without_currency }},
          img: {{ product.featured_image | img_url: '1000x' | json }},
          category: '{{ current_category }}',
          url: {{ product.url | json }}
        }
      {%- endif -%}
    {%- endfor -%}
  ];

  document.addEventListener('DOMContentLoaded', () => {
    const clockEl = document.getElementById('sys-clock');
    const updateClock = () => {
      const now = new Date();
      const timeStr = now.toLocaleTimeString('en-US', {hour12: false});
      const ms = now.getMilliseconds().toString().padStart(3, '0');
      clockEl.textContent = `${timeStr}:${ms}`;
    };
    setInterval(updateClock, 53);
    updateClock();

    const gridEl = document.getElementById('artwork-grid');
    const tabBtns = document.querySelectorAll('.tab-btn');
    let activeTab = 'paintings';

    const renderGrid = (category) => {
      const items = ARTWORKS.filter(item => item.category === category);
      
      if (items.length === 0) {
        gridEl.innerHTML = `<div class="col-span-full py-20 text-[#333] font-bold text-center uppercase tracking-widest">[ NO DATA DETECTED FOR ${category.toUpperCase()} ]</div>`;
        return;
      }

      gridEl.innerHTML = items.map(item => `
        <a href="${item.url}" class="group cursor-pointer block no-underline decoration-transparent">
           <div class="aspect-square bg-[#111] border border-[#222] relative overflow-hidden transition-all duration-300 group-hover:border-[#CCFF00]">
              <span class="absolute top-4 left-4 text-[#CCFF00] text-xs font-mono font-bold tracking-widest z-20">
                 ${item.code}
              </span>
              <div class="absolute inset-0 flex items-center justify-center z-10 opacity-100 group-hover:opacity-20 transition-opacity duration-300">
                 <span class="text-3xl md:text-4xl font-black text-[#1a1a1a] -rotate-45 whitespace-nowrap uppercase tracking-tighter select-none transform scale-125">
                    ${item.title}
                 </span>
              </div>
              <img 
                 src="${item.img}" 
                 alt="${item.title}"
                 class="absolute inset-0 w-full h-full object-cover opacity-0 group-hover:opacity-100 transition-opacity duration-500 mix-blend-normal z-0 grayscale group-hover:grayscale-0"
                 loading="lazy"
              />
           </div>
           <div class="flex justify-between items-baseline mt-4 border-b border-[#222] pb-2 group-hover:border-[#CCFF00] transition-colors duration-300">
              <h3 class="text-xl md:text-2xl font-bold uppercase text-white tracking-tight">${item.title}</h3>
              <span class="text-[#666] font-mono text-sm group-hover:text-[#CCFF00] transition-colors">$${item.price}</span>
           </div>
        </a>
      `).join('');
    };

    renderGrid(activeTab);

    tabBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const newTab = btn.getAttribute('data-tab');
        if (newTab === activeTab) return;
        
        activeTab = newTab;
        
        tabBtns.forEach(b => {
          if (b.getAttribute('data-tab') === activeTab) {
             b.classList.remove('text-[#555]', 'hover:text-white', 'border-transparent');
             b.classList.add('text-[#CCFF00]', 'border-b-2', 'border-[#CCFF00]');
          } else {
             b.classList.remove('text-[#CCFF00]', 'border-b-2', 'border-[#CCFF00]');
             b.classList.add('text-[#555]', 'hover:text-white', 'border-transparent');
          }
        });

        renderGrid(activeTab);
      });
    });
  });
</script>
